FROM python:3.12-slim
WORKDIR /app

# Copy project files and source together so pip install can build the package
COPY apps/ai-services/pyproject.toml ./
COPY apps/ai-services/app/ ./app/

# Install the package with all dependencies
RUN pip install --no-cache-dir .

ENV PORT=5100
CMD uvicorn app.main:app --host 0.0.0.0 --port ${PORT}
